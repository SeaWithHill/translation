# Java与GC调优案例


## 案例1

- 背景: K8S环境, `-Xmx4g`, 容器 request 与 limit 的内存也是4G.
- 现象: 启动一定时间之后, 容器因为OOM被杀;
- 方案: `-Xmx3g`,



## 案例2

- 背景: K8S环境, `-Xmx512m`, 容器 request 与 limit 的内存是1G.
- 现象: 运行一定时间之后, 报 OOM 错误
- 方案: 增加容器内存最大值limit为 1.5~2G;


## 案例3

- 背景: K8S环境, 宿主机96核, 容器CPU限制4核心; JDK8;
- 现象: GC暂停时间尖刺
- 方案: 指定并行和并发GC线程数;




## 案例

- 背景: Flink项目, 滚动时间窗口 5s, 滑动时间窗口N小时
- 现象: 内存OOM
- 方案: 将中间结果对象中的包装类型改为基础数据类型, 降低内存消耗; 修改业务, 增大滑动窗口时间, 减小聚合时间周期.


## 案例

- 背景:
- 现象:
- 方案:


## 案例

- 背景:
- 现象:
- 方案:


## 案例

- 背景:
- 现象:
- 方案:


## 案例

- 背景:
- 现象:
- 方案:


-
